<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>En lille invitation ‚ù§Ô∏è</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #fff5f7;
        color: #333;
        text-align: center;
        padding: 40px;
        overflow-x: hidden;
    }
    .container {
        background: white;
        padding: 30px;
        border-radius: 12px;
        max-width: 500px;
        margin: auto;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        position: relative;
    }
    .date-options button {
        background: #ff6b81;
        color: white;
        border: none;
        padding: 12px 20px;
        margin: 10px;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
        transition: 0.2s;
    }
    .date-options button:hover {
        background: #ff4d68;
        transform: scale(1.08);
    }
    #secretMessage, #quiz, #finalStep {
        display: none;
        margin-top: 20px;
    }
    .fade-in {
        animation: fadeIn 0.6s ease forwards;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Flyvende hjerter */
    .heart {
        position: absolute;
        font-size: 24px;
        animation: floatUp 3s linear forwards;
        pointer-events: none;
    }
    @keyframes floatUp {
        from { transform: translateY(0); opacity: 1; }
        to { transform: translateY(-150px); opacity: 0; }
    }

    /* Nej-knap der flygter */
    #noBtn {
        position: relative;
        background: #aaa;
        color: white;
        padding: 10px 20px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        margin-left: 10px;
    }
</style>
</head>
<body>

<div class="container">
    <h1>Vil du med p√• en hyggelig date? ‚ù§Ô∏è</h1>

    <p>V√¶lg hvilken dag du helst vil p√• date</p>

    <div class="date-options">
        <button onclick="chooseDate('2026-02-21', 'En perfekt l√∏rdag aften fyldt med leg ‚ú®')">üåô 21. februar</button>
        <button onclick="chooseDate('2026-02-22', 'En s√∏ndag fyldt med cuddles og film üíï')">‚ú® 22. februar</button>
        <button onclick="chooseDate('2026-02-23', 'En mandag med ekstra hygge üå∏')">üíñ 23. februar</button>
    </div>

    <p id="chosenMessage" class="fade-in"></p>

    <div id="secretMessage" class="fade-in">
        <p>Inden du skriver dig op til hygger har jeg lille quiz til dig‚Ä¶ üíå</p>
        <button onclick="showQuiz()">Fort√¶l mig hemmeligheden</button>
    </div>

    <!-- Quiz med flere sp√∏rgsm√•l -->
    <div id="quiz" class="fade-in">
        <p id="quizQuestion">Mini‚Äëquiz: Hvad gl√¶der jeg mig mest til?</p>

        <div id="quizButtons">
            <button onclick="quizAnswer(true)">At v√¶re sammen med dig ‚ù§Ô∏è</button>
            <button onclick="quizAnswer(false)">At spise snacks üòÖ</button>
        </div>
    </div>

    <div id="finalStep" class="fade-in">
        <p>Du havde ret‚Ä¶ jeg gl√¶der mig mest til dig ‚ù§Ô∏è</p>

        <p>Vil du gerne forts√¶tte?</p>
        <button onclick="yesContinue()">Ja ‚ù§Ô∏è</button>
        <button id="noBtn" onmouseover="escapeButton()">Nej üò¢</button>

        <div id="timeAndMail" style="display:none; margin-top:20px;">
            <p>V√¶lg tidspunkt for vores date</p>
            <input id="time" type="time"><br><br>

            <p>Indtast din mailadresse</p>
            <input id="email" type="email" placeholder="Din mailadresse"><br><br>

            <button onclick="generateICS()">F√• kalenderinvitation</button>
        </div>
    </div>

    <input id="chosenDate" type="hidden">
</div>

<script>
/* Flyvende hjerter */
function spawnHeart() {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.textContent = "‚ù§Ô∏è";
    heart.style.left = Math.random() * window.innerWidth + "px";
    heart.style.top = "400px";
    document.body.appendChild(heart);

    setTimeout(() => heart.remove(), 3000);
}

/* Dato valgt */
function chooseDate(date, message) {
    document.getElementById("chosenDate").value = date;

    const msg = document.getElementById("chosenMessage");
    msg.textContent = message;
    msg.classList.add("fade-in");

    document.getElementById("secretMessage").style.display = "block";

    spawnHeart();
}

/* Quiz */
let quizStep = 0;
const quizQuestions = [
    {
        q: "Mini‚Äëquiz: Hvad gl√¶der jeg mig mest til?",
        answers: [
            { text: "At v√¶re sammen med dig ‚ù§Ô∏è", correct: true },
            { text: "At spise snacks üòÖ", correct: false }
        ]
    },
    {
        q: "Hvad er det bedste ved dig?",
        answers: [
            { text: "Dit smil üòç", correct: true },
            { text: "At du ikke kan fange mig i UNO üòè", correct: false }
        ]
    },
    {
        q: "Hvad holder jeg mest af?",
        answers: [
            { text: "Dig ‚ù§Ô∏è", correct: true },
            { text: "Min PC og guilden üéÆ", correct: false }
        ]
    }
];

function showQuiz() {
    document.getElementById("quiz").style.display = "block";
}

function quizAnswer(correct) {
    if (!correct) {
        alert("Hmm‚Ä¶ N√¶sten rigtigt, men pr√∏v igen üòò");
        return;
    }

    quizStep++;

    if (quizStep >= quizQuestions.length) {
        document.getElementById("finalStep").style.display = "block";
        return;
    }

    const q = quizQuestions[quizStep];
    document.getElementById("quizQuestion").textContent = q.q;

    const btns = document.getElementById("quizButtons");
    btns.innerHTML = "";

    q.answers.forEach(a => {
        const b = document.createElement("button");
        b.textContent = a.text;
        b.onclick = () => quizAnswer(a.correct);
        btns.appendChild(b);
    });

    spawnHeart();
}

/* Nej-knap der flygter */
function escapeButton() {
    const btn = document.getElementById("noBtn");
    btn.style.position = "absolute";
    btn.style.left = Math.random() * 300 + "px";
    btn.style.top = Math.random() * 200 + "px";
}

/* Ja-knap */
function yesContinue() {
    document.getElementById("timeAndMail").style.display = "block";
    spawnHeart();
}

/* ICS-fil */
function generateICS() {
    const email = document.getElementById("email").value;
    const date = document.getElementById("chosenDate").value;
    const time = document.getElementById("time").value;

    if (!email) {
        alert("Skriv din mailadresse f√∏rst ‚ù§Ô∏è");
        return;
    }
    if (!date) {
        alert("V√¶lg en dato f√∏rst ‚ù§Ô∏è");
        return;
    }
    if (!time) {
        alert("V√¶lg et tidspunkt ‚ù§Ô∏è");
        return;
    }

    const start = date.replace(/-/g, "") + "T" + time.replace(":", "") + "00";

    const [hour, minute] = time.split(":");
    const endHour = String(Number(hour) + 3).padStart(2, "0");
    const end = date.replace(/-/g, "") + "T" + endHour + minute + "00";

    const title = "Hyggelig dateaften";
    const description = "En romantisk aften kun for os to ‚ù§Ô∏è";
    const location = "Hjemme hos os";

    const icsContent =
`BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
SUMMARY:${title}
DESCRIPTION:${description}
LOCATION:${location}
DTSTART:${start}
DTEND:${end}
END:VEVENT
END:VCALENDAR`;

    const blob = new Blob([icsContent], { type: "text/calendar;charset=utf-8" });
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = "date_invitation.ics";
    a.click();

    URL.revokeObjectURL(url);
}
</script>

</body>
</html>
